<div (clickOutside)="onClickedOutsideChat($event)">
<div class="engine-wrapper" >
  <canvas #rendererCanvas id="renderCanvas" onclick="document.getElementById('general').style.display='flex'; document.getElementById('general').classList.remove('d-none'); document.getElementById('renderCanvas').style.display='none' "></canvas>
</div>
<div style="position: fixed; bottom: 0;  right:0; width: 350px;z-index: 9999;"  class="chat-container">


     <!--<button id="abrir" onclick="document.getElementById('general').style.display='flex'; document.getElementById('general').classList.remove('d-none'); document.getElementById('abrir').style.display='none' "><i class="fas fa-comment fa-2x"></i></button>
     -->

    <div id="general" class="vete d-none flex-column justify-content-between" style="float: right ; position: relative;width:100%;">
      <a href="{{Ancla}}" id='averq7'><span id='anclado' ></span></a>
      <a href="{{Ancla2}}" id='averq2'><span id='anclado2' ></span></a>
      <a href="{{Ancla3}}" id='averq1'><span id='anclado3' ></span></a>
      <a href="{{Ancla4}}" id='averq3'><span id='anclado4' ></span></a>
      <a href="{{Ancla5}}" id='averq'><span id='anclado5' ></span></a>
      <a href="{{Ancla6}}" id='averq6'><span id='anclado6' ></span></a>
      <a href="{{Ancla444}}" id='averq8'><span id='anclado8' ></span></a>
      <a href="{{Ancla999}}" id='averq9'><span id='anclado9' ></span></a>
      <a href="{{Ancla9988}}" id='averq9988'><span id='anclado9988' ></span></a>
      <a href="{{Ancla1188}}" id='averq1188'><span id='anclado1188' ></span></a>
        <div id="cabecera" class="d-flex flex-row justify-content-between align-items-center">
            <p class="w-75" style="font-weight: 600;">Catalina - Asistente virtual de la BVMC</p>
            <div class="w-25 d-flex flex-row justify-content-end" style="padding-right: 8px; ">
                <!-- <img id="minimizar" src="/assets/images/minimizar.PNG" alt="minimizar" onclick="document.getElementById('general').style.display='none'"> -->
                <i class="fas fa-times" style="cursor: pointer;" onclick="document.getElementById('general').style.display='none'; document.getElementById('renderCanvas').style.display='block'"></i>
                <!-- <img id="cerrar" src="/assets/images/cerrar.PNG" alt="cerrar" onclick="document.getElementById('general').style.display='none';
            document.getElementById('abrir').style.display='none';" > -->
            </div>
            <!-- <img src="/assets/images/enviar_mensaje.png" alt="enviar_mensaje" (click)="sendMessage()">-->
        </div>

        <div id="chat" [ngStyle]="{'filter': (status === 'loading') ? 'brightness(60%)' : 'brightness(100%)'}" #chat [scrollTop]="chat.scrollHeight">
            <ng-container *ngFor="let message of messages | async" >

                <div id='prueba' class="message" [ngClass]="{ 'from': message.sentBy === 'bot',
                                            'to':   message.sentBy === 'user' }">

                       <!-- <a href="{{ message.content }}">
                            <img src="/assets/images/BuscarChat.PNG" style="margin-left:-5px; height: 100%; width: 100%; position:absolute; margin-top:-5px;">
                            <br><br><br><br><br>
                        </a>
                    </div>-->

                     <!--<div *ngIf="message.content.includes('EstoEsUnaReserva,')" id="malo">-->
                        <!--<a  href="{{ message.content }}">-->
                        <!--<img [src]="imgSrc" style="margin-left:-10px; height: 105%; width: 105%; position:absolute; margin-top:-5px; cursor: pointer;" (click)='res(message.content)'>
                        -->
                        <!--</a>-->
                    <!--</div>-->
                    <div *ngIf="!message.content.includes('Te puedo decir qué es la Biblioteca Virtual Miguel de Cervantes, te') && !message.content.includes('Para conocer las últimas novedades acerca de la BVMC haz click') && !message.content.includes('A través de la cuenta de correo') && !message.content.includes('Sí, para acceder al blog haz click') && !message.content.includes('Las cosas que puedo hacer por ti son darte información sobre la BVMC y') && !message.content.includes('¿A qué idioma quieres que lo traduzca?') && !message.content.includes('+ObrasPorAutor') && !message.content.includes('DameLasRedecitas') && !message.content.includes('+TwitterATope') && !message.content.includes('+BuscarInternet') && !message.content.includes('VídeosBibliotecaYa') && !message.content.includes('NoticiasDarYa') && !message.content.includes('+AutorBuscar') && !message.content.includes('+buscarobrita') && !message.content.includes('+EstoEsUnaTraduccion') && !message.content.includes('PadresMiguel') && !message.content.includes('ObrasMiguel') && !message.content.includes('TiempoYaHoy')  && !message.content.includes('NacimientoMiguel')  && !message.content.includes('MurioMiguel')  && !message.content.includes('fotoMiguel')  && !message.content.includes('ocupacionMiguel')  && !message.content.includes('movimientoMiguel') && !message.content.includes('hijaMiguel')  && !message.content.includes('generosMiguel') && !message.content.includes('causamuerteMiguel') && !message.content.includes('religionMiguel') && !message.content.includes('enterradoMiguel') && !message.content.includes('idiomasMiguel') && !message.content.includes('mujerMiguel') && !message.content.includes('TiempoYaMañana')  && !message.content.includes('EdicionesQuijote') && !message.content.includes('idiomasBiblio') && !message.content.includes('ObrasEs') && !message.content.includes('ObrasVal') && !message.content.includes('ObrasGrieA') && !message.content.includes('ObrasSerb') && !message.content.includes('ObrasYid') && !message.content.includes('ObrasGal') && !message.content.includes('ObrasChec') && !message.content.includes('ObrasAram') && !message.content.includes('ObrasFin') && !message.content.includes('ObrasIta') && !message.content.includes('ObrasHeb') && !message.content.includes('ObrasAmh')  && !message.content.includes('ObrasJav') && !message.content.includes('ObrasCro') && !message.content.includes('ObrasChi') && !message.content.includes('ObrasLen') && !message.content.includes('ObrasSud') && !message.content.includes('ObrasLadin') && !message.content.includes('ObrasMitico') && !message.content.includes('ObrasKara') && !message.content.includes('ObrasUgar') && !message.content.includes('ObrasNoru') && !message.content.includes('ObrasSiri')  && !message.content.includes('ObrasNah')  && !message.content.includes('ObrasLatin')  && !message.content.includes('ObrasHol')  && !message.content.includes('ObrasGall') && !message.content.includes('ObrasSerbi') && !message.content.includes('ObrasIngl') && !message.content.includes('ObrasEsper') && !message.content.includes('ObrasOjib') && !message.content.includes('ObrasSuec') && !message.content.includes('ObrasAlem') && !message.content.includes('ObrasPortu') && !message.content.includes('ObrasFranc') && !message.content.includes('ObrasGrieg') && !message.content.includes('ObrasArabe') && !message.content.includes('ObrasCatal') && !message.content.includes('ObrasRus') && !message.content.includes('ObrasSiriac') && !message.content.includes('ObrasDan') && !message.content.includes('ObrasLengSig') && !message.content.includes('ObrasCreo') && !message.content.includes('ObrasRuma') && !message.content.includes('ObrasHungar') && !message.content.includes('ObrasSignIn') && !message.content.includes('ObrasTaga') && !message.content.includes('ObrasPola') && !message.content.includes('ObrasJapos') && !message.content.includes('ObrasMulti') && !message.content.includes('ObrasEusk') && !message.content.includes('ObrasLitu') && !message.content.includes('ObrasPersa')  && !message.content.includes('+aries') && !message.content.includes('+acuario') && !message.content.includes('+cancer') && !message.content.includes('+cáncer') && !message.content.includes('+tauro') && !message.content.includes('+capricornio') && !message.content.includes('+escorpion') && !message.content.includes('+escorpión') && !message.content.includes('+geminis') && !message.content.includes('+géminis') && !message.content.includes('+leo') && !message.content.includes('+libra') && !message.content.includes('+piscis') && !message.content.includes('+sagitario') && !message.content.includes('+virgo')">
                    <span>{{ message.content }}</span>
                  </div>
                    <div *ngIf="message.content.includes('Te puedo decir qué es la Biblioteca Virtual Miguel de Cervantes, te') || message.content.includes('Para conocer las últimas novedades acerca de la BVMC haz click') || message.content.includes('A través de la cuenta de correo') || message.content.includes('Sí, para acceder al blog haz click') || message.content.includes('Las cosas que puedo hacer por ti son darte información sobre la BVMC y') || message.content.includes('¿A qué idioma quieres que lo traduzca?') || message.content.includes('+ObrasPorAutor') || message.content.includes('DameLasRedecitas') || message.content.includes('+TwitterATope') || message.content.includes('+BuscarInternet') || message.content.includes('VídeosBibliotecaYa') || message.content.includes('NoticiasDarYa') || message.content.includes('+AutorBuscar') || message.content.includes('+buscarobrita') || message.content.includes('+EstoEsUnaTraduccion') || message.content.includes('PadresMiguel') || message.content.includes('ObrasMiguel') || message.content.includes('TiempoYaHoy')  || message.content.includes('NacimientoMiguel')  || message.content.includes('MurioMiguel')  || message.content.includes('fotoMiguel')  || message.content.includes('ocupacionMiguel')  || message.content.includes('movimientoMiguel') || message.content.includes('hijaMiguel') || message.content.includes('generosMiguel') || message.content.includes('causamuerteMiguel') || message.content.includes('religionMiguel') || message.content.includes('enterradoMiguel') || message.content.includes('idiomasMiguel') || message.content.includes('mujerMiguel') || message.content.includes('TiempoYaMañana') || message.content.includes('EdicionesQuijote') || message.content.includes('idiomasBiblio') || message.content.includes('ObrasEs') || message.content.includes('ObrasVal') || message.content.includes('ObrasGrieA') || message.content.includes('ObrasSerb') || message.content.includes('ObrasYid') || message.content.includes('ObrasGal') || message.content.includes('ObrasChec') || message.content.includes('ObrasAram') || message.content.includes('ObrasFin') || message.content.includes('ObrasIta') || message.content.includes('ObrasHeb') || message.content.includes('ObrasAmh') || message.content.includes('ObrasJav') || message.content.includes('ObrasCro') || message.content.includes('ObrasChi') || message.content.includes('ObrasLen') || message.content.includes('ObrasSud') || message.content.includes('ObrasLadin') || message.content.includes('ObrasMitico') || message.content.includes('ObrasKara') || message.content.includes('ObrasUgar') || message.content.includes('ObrasNoru') || message.content.includes('ObrasSiri') || message.content.includes('ObrasNah') || message.content.includes('ObrasLatin') || message.content.includes('ObrasHol') || message.content.includes('ObrasGall') || message.content.includes('ObrasSerbi') || message.content.includes('ObrasIngl') || message.content.includes('ObrasEsper') || message.content.includes('ObrasOjib') || message.content.includes('ObrasSuec') || message.content.includes('ObrasAlem') || message.content.includes('ObrasPortu') || message.content.includes('ObrasFranc') || message.content.includes('ObrasGrieg') || message.content.includes('ObrasArabe') || message.content.includes('ObrasCatal') || message.content.includes('ObrasRus') || message.content.includes('ObrasSiriac') || message.content.includes('ObrasDan') || message.content.includes('ObrasLengSig') || message.content.includes('ObrasCreo') || message.content.includes('ObrasRuma') || message.content.includes('ObrasHungar') || message.content.includes('ObrasSignIn') || message.content.includes('ObrasTaga') || message.content.includes('ObrasPola') || message.content.includes('ObrasJapos') || message.content.includes('ObrasMulti') || message.content.includes('ObrasEusk') || message.content.includes('ObrasLitu') || message.content.includes('ObrasPersa') || message.content.includes('+aries') || message.content.includes('+acuario') || message.content.includes('+cancer') || message.content.includes('+cáncer') || message.content.includes('+tauro') || message.content.includes('+capricornio') || message.content.includes('+escorpion') || message.content.includes('+escorpión') || message.content.includes('+geminis') || message.content.includes('+géminis') || message.content.includes('+leo') || message.content.includes('+libra') || message.content.includes('+piscis') || message.content.includes('+sagitario') || message.content.includes('+virgo')" >
                    <span id='u' (click)="prueba(message.content);"></span>
                    </div>
                </div>

            </ng-container>
        </div>
        <div *ngIf="status === 'loading'" class="app-loading">
            <div class="logo"></div>
            <svg class="spinner" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
          </svg>
        </div>
        <div id="abajo" class="d-flex flex-row align-items-center justify-content-around">
            <input id="inputtt" class="input-group-text" [(ngModel)]="formValue" (keyup.enter)="sendMessage()" type="text" placeholder="Escribe tu mensaje" autofocus>
            <i id='durico' class="far fa-paper-plane fa-2x" style="cursor: pointer" (click)="sendMessage()"></i>
            <!-- <img id="enviar" src="/assets/images/enviar_mensaje.png" alt="enviar_mensaje" (click)="sendMessage()"> -->
            <!--<button id="cerrar" onclick="document.getElementById('chat').style.display='none'">Cerrar</button>-->

        </div>

    </div>


</div>

</div>
